-- 1. Пользователи

INSERT INTO Users (name, email) VALUES
('Анна Иванова', 'anna.ivanova@example.com'),
('Дмитрий Петров', 'dmitry.petrov@example.com'),
('Елена Сидорова', 'elena.sidorova@example.com');

-- 2. Коллекции

INSERT INTO Collections (user_id, name, description) VALUES
(1, 'Базы данных', 'Конспекты по курсу БД'),
(1, 'Алгоритмы', 'Материалы по алгоритмам и структурам данных'),
(2, 'Математика', 'Высшая математика, 2 семестр'),
(3, 'Python', 'Основы программирования на Python');

-- 3. Материалы

INSERT INTO Materials (collection_id, title, content, material_type) VALUES
(1, 'Нормализация БД', 'Нормализация - процесс организации данных в базе данных. Включает создание таблиц и установление отношений между ними согласно правилам. Первая нормальная форма (1НФ) требует атомарности значений. Вторая нормальная форма (2НФ) устраняет частичные зависимости. Третья нормальная форма (3НФ) устраняет транзитивные зависимости.', 'text'),
(1, 'SQL запросы', 'SQL (Structured Query Language) - язык структурированных запросов. Основные команды: SELECT для выборки, INSERT для вставки, UPDATE для обновления, DELETE для удаления. JOIN используется для объединения таблиц. WHERE задаёт условия фильтрации.', 'text'),
(2, 'Сортировки', 'Алгоритмы сортировки упорядочивают элементы. Пузырьковая сортировка - O(n²). Быстрая сортировка (QuickSort) - O(n log n) в среднем. Сортировка слиянием (MergeSort) - O(n log n) гарантированно.', 'text'),
(3, 'Производные', 'Производная функции показывает скорость изменения. Производная константы равна нулю. Производная x^n равна n*x^(n-1). Производная суммы равна сумме производных.', 'text'),
(4, 'Списки в Python', 'Список - упорядоченная изменяемая коллекция. Создание: list = [1, 2, 3]. Методы: append() добавляет элемент, remove() удаляет, sort() сортирует. Индексация начинается с 0.', 'text');

-- 4. Нити (фрагменты материалов)

INSERT INTO Chunks (material_id, content, position) VALUES
(1, 'Нормализация - процесс организации данных в базе данных. Включает создание таблиц и установление отношений между ними согласно правилам.', 1),
(1, 'Первая нормальная форма (1НФ) требует атомарности значений.', 2),
(1, 'Вторая нормальная форма (2НФ) устраняет частичные зависимости.', 3),
(1, 'Третья нормальная форма (3НФ) устраняет транзитивные зависимости.', 4),
(2, 'SQL (Structured Query Language) - язык структурированных запросов.', 1),
(2, 'Основные команды: SELECT для выборки, INSERT для вставки, UPDATE для обновления, DELETE для удаления.', 2),
(2, 'JOIN используется для объединения таблиц.', 3),
(3, 'Алгоритмы сортировки упорядочивают элементы.', 1),
(3, 'Пузырьковая сортировка - O(n²).', 2),
(3, 'Быстрая сортировка (QuickSort) - O(n log n) в среднем.', 3),
(4, 'Производная функции показывает скорость изменения.', 1),
(4, 'Производная константы равна нулю.', 2),
(5, 'Список - упорядоченная изменяемая коллекция. Создание: list = [1, 2, 3].', 1),
(5, 'Методы: append() добавляет элемент, remove() удаляет, sort() сортирует.', 2);

-- 5. Концепты (термины и определения)

INSERT INTO Concepts (term, definition) VALUES
('Нормализация', 'Процесс организации данных в базе данных для уменьшения избыточности'),
('1НФ', 'Первая нормальная форма: каждое поле содержит атомарное значение'),
('2НФ', 'Вторая нормальная форма: устранение частичных зависимостей от составного ключа'),
('3НФ', 'Третья нормальная форма: устранение транзитивных зависимостей'),
('SQL', 'Язык структурированных запросов для работы с реляционными БД'),
('SELECT', 'Команда SQL для выборки данных из таблиц'),
('JOIN', 'Операция объединения таблиц в SQL'),
('Алгоритм сортировки', 'Алгоритм упорядочивания элементов по определённому критерию'),
('QuickSort', 'Быстрая сортировка с временной сложностью O(n log n) в среднем'),
('Производная', 'Математическая операция, показывающая скорость изменения функции'),
('Список Python', 'Упорядоченная изменяемая коллекция элементов в Python');

-- 6. Связи нитей и концептов

INSERT INTO ChunkConcepts (chunk_id, concept_id) VALUES
(1, 1),
(2, 2),
(3, 3),
(4, 4),
(5, 5),
(6, 6),
(7, 7),
(8, 8),
(10, 9),
(11, 10),
(13, 11);

-- 7. Флешкарты

INSERT INTO Flashcards (chunk_id, concept_id, question_text, answer_text) VALUES
(1, 1, 'Что такое нормализация базы данных?', 'Процесс организации данных в базе данных для уменьшения избыточности'),
(2, 2, 'Что требует первая нормальная форма (1НФ)?', 'Каждое поле должно содержать атомарное значение'),
(3, 3, 'Что устраняет вторая нормальная форма (2НФ)?', 'Частичные зависимости от составного ключа'),
(4, 4, 'Что устраняет третья нормальная форма (3НФ)?', 'Транзитивные зависимости'),
(5, 5, 'Что такое SQL?', 'Язык структурированных запросов для работы с реляционными БД'),
(7, 7, 'Для чего используется JOIN в SQL?', 'Для объединения таблиц'),
(10, 9, 'Какая временная сложность у QuickSort в среднем?', 'O(n log n)'),
(11, 10, 'Что показывает производная функции?', 'Скорость изменения функции'),
(13, 11, 'Что такое список в Python?', 'Упорядоченная изменяемая коллекция элементов');

-- 8. Тестовые вопросы

INSERT INTO Questions (chunk_id, question_text, question_type, correct_answer, options) VALUES
(2, 'Первая нормальная форма требует атомарности значений?', 'true_false', 'true', NULL),
(3, 'Какая нормальная форма устраняет частичные зависимости?', 'multiple_choice', '2НФ', 
 '[{"text": "1НФ", "is_correct": false}, {"text": "2НФ", "is_correct": true}, {"text": "3НФ", "is_correct": false}]'::jsonb),
(6, 'Какая команда используется для выборки данных?', 'multiple_choice', 'SELECT',
 '[{"text": "SELECT", "is_correct": true}, {"text": "INSERT", "is_correct": false}, {"text": "UPDATE", "is_correct": false}]'::jsonb),
(9, 'Пузырьковая сортировка имеет временную сложность O(n²)?', 'true_false', 'true', NULL);

-- 9. Попытки (ответы студентов)

INSERT INTO Attempts (user_id, flashcard_id, question_id, user_answer, is_correct, attempt_date) VALUES
(1, 1, NULL, 'Процесс организации данных', TRUE, '2025-12-01'),
(1, 2, NULL, 'Атомарность', TRUE, '2025-12-01'),
(1, 3, NULL, 'Не помню', FALSE, '2025-12-02'),
(1, 3, NULL, 'Частичные зависимости', TRUE, '2025-12-05'),
(1, 4, NULL, 'Транзитивные зависимости', TRUE, '2025-12-06'),
(1, 5, NULL, 'Язык запросов', TRUE, '2025-12-07'),
(1, 6, NULL, 'Объединение', FALSE, '2025-12-08'),
(1, 6, NULL, 'Для объединения таблиц', TRUE, '2025-12-10'),
(1, NULL, 1, 'true', TRUE, '2025-12-03'),
(1, NULL, 2, '2НФ', TRUE, '2025-12-04'),
(2, 1, NULL, 'Уменьшение избыточности', TRUE, '2025-12-02'),
(2, 2, NULL, 'Не знаю', FALSE, '2025-12-02'),
(2, 7, NULL, 'O(n log n)', TRUE, '2025-12-05'),
(2, 8, NULL, 'Скорость изменения', TRUE, '2025-12-06'),
(3, 9, NULL, 'Коллекция элементов', TRUE, '2025-12-03'),
(3, 5, NULL, 'Язык программирования', FALSE, '2025-12-04'),
(3, 1, NULL, 'Организация БД', TRUE, '2025-12-05');

-- 10. Расписание повторений

INSERT INTO Reviews (user_id, flashcard_id, next_review_at, interval_days, ease_factor) VALUES
(1, 1, '2025-12-25', 7, 2.5),
(1, 2, '2025-12-23', 5, 2.6),
(1, 3, '2025-12-21', 2, 2.2),
(1, 4, '2025-12-26', 8, 2.7),
(1, 5, '2025-12-24', 6, 2.5),
(1, 6, '2025-12-21', 3, 2.3),
(2, 1, '2025-12-27', 10, 2.8),
(2, 2, '2025-12-21', 1, 2.0),
(2, 7, '2025-12-28', 12, 2.9),
(3, 9, '2025-12-22', 4, 2.4),
(3, 5, '2025-12-21', 2, 2.1);